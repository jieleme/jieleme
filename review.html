<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åæ€å¤ç›˜ - è‡ªå¾‹è®¡æ—¶å™¨</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .review-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .review-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .review-title {
            font-size: 28px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .review-subtitle {
            font-size: 16px;
            color: #666;
        }

        .review-stats {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }

        .stat-item {
            font-size: 18px;
            margin: 8px 0;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #FFD700;
        }

        .review-form {
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }

        .form-textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            min-height: 120px;
            resize: vertical;
            font-family: inherit;
        }

        .form-textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .review-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #e0e0e0;
            color: #666;
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }

        .review-tips {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-top: 30px;
        }

        .review-tips h3 {
            color: #667eea;
            margin-top: 0;
        }

        .review-tips ul {
            padding-left: 20px;
        }

        .review-tips li {
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="review-container">
            <div class="review-header">
                <h1 class="review-title">ğŸ“ åæ€å¤ç›˜</h1>
                <p class="review-subtitle">è®°å½•ä½ çš„æˆé•¿ä¹‹æ—…</p>
            </div>

            <div class="review-stats" id="reviewStats">
                <div class="stat-item">
                    æœ¬æ¬¡åšæŒ: <span class="stat-value" id="totalTime">åŠ è½½ä¸­...</span>
                </div>
                <div class="stat-item">
                    å¤ç›˜æ¬¡æ•°: <span class="stat-value" id="reviewCount">åŠ è½½ä¸­...</span>
                </div>
            </div>

            <div class="review-form">
                <div class="form-group">
                    <label class="form-label">ğŸ¯ æœ¬æ¬¡åšæŒçš„æ”¶è·:</label>
                    <textarea id="achievements" class="form-textarea" placeholder="æè¿°ä½ åœ¨æœ¬æ¬¡åšæŒè¿‡ç¨‹ä¸­è·å¾—çš„æ”¶è·å’Œæˆé•¿..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">ğŸ’¡ ç»éªŒæ•™è®­:</label>
                    <textarea id="lessons" class="form-textarea" placeholder="æ€»ç»“ç»éªŒæ•™è®­ï¼Œå¸®åŠ©æœªæ¥æ›´å¥½åœ°åšæŒ..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">ğŸš€ æœªæ¥æ”¹è¿›:</label>
                    <textarea id="improvements" class="form-textarea" placeholder="è®¡åˆ’æœªæ¥å¦‚ä½•æ”¹è¿›å’Œæå‡..."></textarea>
                </div>
            </div>

            <div class="review-tips">
                <h3>åæ€å»ºè®®:</h3>
                <ul>
                    <li>å…·ä½“æè¿°ä½ çš„æ„Ÿå—å’Œå˜åŒ–</li>
                    <li>è®°å½•æˆåŠŸçš„ç­–ç•¥å’Œæ–¹æ³•</li>
                    <li>åˆ†æå¤±è´¥çš„åŸå› å’Œè§¦å‘ç‚¹</li>
                    <li>åˆ¶å®šå…·ä½“çš„æ”¹è¿›è®¡åˆ’</li>
                    <li>ä¿æŒç§¯æå’Œé¼“åŠ±çš„æ€åº¦</li>
                </ul>
            </div>

            <div class="review-actions">
                <button class="btn-secondary" onclick="goBackToMain()">è¿”å›ä¸»é¡µ</button>
                <button class="btn-primary" onclick="saveReview()">ä¿å­˜åæ€</button>
            </div>
        </div>
    </div>

    <script>
        // ä»URLå‚æ•°ä¸­è·å–æ•°æ®
        function getUrlParams() {
            const params = {};
            const queryString = window.location.search.substring(1);
            const pairs = queryString.split('&');

            for (let pair of pairs) {
                const [key, value] = pair.split('=');
                if (key && value) {
                    params[key] = decodeURIComponent(value);
                }
            }

            return params;
        }

        // æ˜¾ç¤ºç»Ÿè®¡æ•°æ®
        function displayStats() {
            const params = getUrlParams();

            // è®¡ç®—æ€»æ—¶é—´æ˜¾ç¤º
            const days = params.days || '0';
            const hours = params.hours || '0';
            const minutes = params.minutes || '0';
            const seconds = params.seconds || '0';

            const totalTime = `${days}å¤© ${hours}å°æ—¶ ${minutes}åˆ† ${seconds}ç§’`;
            document.getElementById('totalTime').textContent = totalTime;

            // è·å–å¤ç›˜æ¬¡æ•°
            const reviews = JSON.parse(localStorage.getItem('reviewHistory')) || [];
            document.getElementById('reviewCount').textContent = reviews.length;
        }

        // ä¿å­˜åæ€æ•°æ®
        function saveReview() {
            const achievements = document.getElementById('achievements').value;
            const lessons = document.getElementById('lessons').value;
            const improvements = document.getElementById('improvements').value;

            if (!achievements && !lessons && !improvements) {
                alert('è¯·å¡«å†™è‡³å°‘ä¸€é¡¹åæ€å†…å®¹');
                return;
            }

            const params = getUrlParams();

            const reviewData = {
                date: new Date().toISOString(),
                days: params.days || 0,
                hours: params.hours || 0,
                minutes: params.minutes || 0,
                seconds: params.seconds || 0,
                totalSeconds: params.totalSeconds || 0,
                achievements: achievements,
                lessons: lessons,
                improvements: improvements
            };

            // ä¿å­˜åˆ°å¤ç›˜å†å²
            const reviews = JSON.parse(localStorage.getItem('reviewHistory')) || [];
            reviews.push(reviewData);
            localStorage.setItem('reviewHistory', JSON.stringify(reviews));

            // é‡ç½®è®¡æ—¶å™¨
            const newStartTime = Date.now();
            localStorage.setItem('startTime', newStartTime);

            alert('åæ€ä¿å­˜æˆåŠŸï¼è®¡æ—¶å™¨å·²é‡ç½®ã€‚');
            window.location.href = 'index.html';
        }

        // è¿”å›ä¸»é¡µ
        function goBackToMain() {
            if (confirm('ç¡®å®šè¦è¿”å›ä¸»é¡µå—ï¼Ÿæœªä¿å­˜çš„åæ€å†…å®¹å°†ä¼šä¸¢å¤±ã€‚')) {
                window.location.href = 'index.html';
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ˜¾ç¤ºæ•°æ®
        document.addEventListener('DOMContentLoaded', function() {
            displayStats();

            // ä»localStorageåŠ è½½å¯èƒ½çš„è‰ç¨¿
            const draft = localStorage.getItem('reviewDraft');
            if (draft) {
                try {
                    const draftData = JSON.parse(draft);
                    document.getElementById('achievements').value = draftData.achievements || '';
                    document.getElementById('lessons').value = draftData.lessons || '';
                    document.getElementById('improvements').value = draftData.improvements || '';
                } catch (error) {
                    console.error('åŠ è½½è‰ç¨¿å¤±è´¥:', error);
                }
            }

            // å®šæœŸä¿å­˜è‰ç¨¿
            setInterval(function() {
                const draftData = {
                    achievements: document.getElementById('achievements').value,
                    lessons: document.getElementById('lessons').value,
                    improvements: document.getElementById('improvements').value
                };
                localStorage.setItem('reviewDraft', JSON.stringify(draftData));
            }, 30000); // æ¯30ç§’è‡ªåŠ¨ä¿å­˜è‰ç¨¿
        });
    </script>
</body>
</html>
